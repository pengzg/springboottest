<common-navigater data="[{name:'业务员'},{name:'业务员拜访明细'}]"></common-navigater>
<div class="xt_changeHtml"
	style="position: relative; padding-left: 10px;">
	<div class="treeStyle"
		style="top: 15px; border: 0; padding: 5px 2px 2px 2px; width: 315px;">
		<div class="t-input-group" style="margin-left: 0px;">
			<div class="floatLeft">
				<span class="input-group-addon date_check_main"
					style="width: 50px; height: 39px; line-height: 26px;" tabindex="0" onblur="dateRangeUtil.hideDateSelect()" ng-click="chooseDate($event);"> 日期 </span> <input
					type="text" ng-model="startdate" class="Wdate"
					style="width: 100px; height: 27px; border-top-left-radius: 0; border-bottom-left-radius: 0;"
					id="start_date"
					onFocus="WdatePicker({onpicked: function (dp) { angular.element(this).scope().changeDate(); },dateFmt:'yyyy-MM-dd',lang:'zh-cn'})" />
			</div>
			<div class="floatLeft">
				<input type="text" class="Wdate"
					style="width: 100px; height: 27px; margin-left: 8px; border-top-left-radius: 0; border-bottom-left-radius: 0;"
					id="end_date" ng-model="enddate"
					onFocus="WdatePicker({onpicked: function (dp) { angular.element(this).scope().changeDate(); },dateFmt:'yyyy-MM-dd',lang:'zh-cn'})" />
			</div>
		</div>
		<div class="xt_filter" style="margin-top: 10px;">
			<div class="t-input-group" style="margin-left: 0px;">
				<span class="input-group-addon"
					style="width: 50px; height: 39px; line-height: 26px;"> 状态 </span> <span
					class="posRelative"> <input class="t-input dropdown"
					ng-model="stateName" type="text" data-toggle="dropdown"
					style="width: 252px; height: 39px !important; border-color: #d6dee3 !important; border-top-right-radius: 4px !important; border-bottom-right-radius: 4px !important">
					<div class="droplistWrap" style="width: 252px; top: 28px;">
						<div class="droplist">
							<span class="listItem" ng-repeat="x in visitStateList"
								ng-click="chooseState(x)">{{x.bd_name}}</span>

						</div>
					</div>
				</span>
			</div>
		</div>
		<div class="mtop15 " style="width: 303px;">
			<ul class="nav nav-tabs">
				<li class="active"><a href="#tab1"
					 ng-click="getBaseUserdocList('');"
					style="font-size: 14px; line-height: 18px;">全部</a></li>
				<li class=""><a href="#tab2" ng-click="getBaseUserdocList(1);"
					 style="font-size: 14px; line-height: 18px;" >车销</a></li>
				<li ><a href="#tab3" ng-click="getBaseUserdocList(2);"
					style="font-size: 14px; line-height: 18px;">跑单</a></li>
				<li class=""><a href="#tab4" ng-click="getBaseUserdocList(4);"
				 style="font-size: 14px; line-height: 18px;">配送</a></li>
			</ul>
			<div class="t-tabContent"
				style="overflow-y: auto; overflow-x: hidden; height: 376px; padding: 10px 0">
				<div class="t-box" id="tab1" style="display: block;">
					<ul class="t-box-list">
						<li 
							>
							
							<div class="clearfix"><input type="checkbox" class="js_selectAll" ng-click="selectAll($event);">
								<span>全部业务员</span> <span
									class="rightNum floatRight"></span>
							</div>
							<div class="clearfix" style="color: #ABABAB;"></div>
						</li>
						<li ng-repeat="userdoc in baseUserdocList">
							
							<div class="clearfix"><input type="checkbox" name="" data-id="{{userdoc.su_id}}" class="js_select" ng-click="queryCsLineCustTask();">
								<span>{{userdoc.bud_name}}</span> <span
									class="rightNum floatRight">{{userdoc.line_count}}</span>
							</div>
							<div class="clearfix" style="color: #ABABAB;">{{userdoc.su_usertype_nameref}}</div>
						</li>

					</ul>
				</div>
				<div class="t-box" id="tab2" style="display: none;">
					<ul class="t-box-list">
						<li class="item-select">
							<div class="clearfix">
								<span>徐桂玉车销2</span> <span class="rightNum floatRight">12</span>
							</div>
							<div class="clearfix" style="color: #ABABAB;">车销+跑单</div>
						</li>

					</ul>
				</div>
				<div class="t-box" id="tab3" style="display: none;">
					<ul class="t-box-list">
						<li class="item-select">
							<div class="clearfix">
								<span>徐桂玉车销3</span> <span class="rightNum floatRight">12</span>
							</div>
							<div class="clearfix" style="color: #ABABAB;">车销+跑单</div>
						</li>

					</ul>
				</div>
				<div class="t-box" id="tab4" style="display: none;">
					<ul class="t-box-list">
						<li class="item-select">
							<div class="clearfix">
								<span>徐桂玉车销4</span> <span class="rightNum floatRight">12</span>
							</div>
							<div class="clearfix" style="color: #ABABAB;">车销+跑单</div>
						</li>

					</ul>
				</div>
			</div>
		</div>
	</div>

	<div class="ztree-btn" style="width: 1px; left: 325px;"></div>

	<div class="treeContent" style="margin-left: 315px;">

		<div class="xt_orderDetail" id="viewer_main">
			<div class="tabChange">
				<ul id="xt_tabUlTop" class="xt_tabUlTop" style="height: 39px;border-bottom:1px solid #ddd;">
					<li ng-click="selectTab(1)"
						ng-class="{true:'tabColor',false:''}[tab == 1]"
						style="background-color: white;height:38px;border-bottom:-1px;">拜访明细</li>
					<li ng-click="selectTab(2)"
						ng-class="{true:'tabColor',false:''}[tab == 2]"
						style="background-color: white;height:38px;border-bottom:-1px;">所有图片</li>
					<span style="color: red;">注:签到距离大于500米为异常拜访</span>

				</ul>


				<div class="xt_tabUlBottom" ng-if="tab==1" style="margin-top:15px;">

					<div class="xt_childTable" style="padding-top: 0;">
						<table
							class="table table3 table-striped table-hover table-bordered SortCss">
							<thead>
								<tr class="bgColor-tableTr tableMiddle zk_stockTitleTh">
									<th class="colorCenter noSortCss">序号</th>

									<th class=" noSortCss">客户名称</th>
									<th class=" noSortCss">到店/离店时间</th>
									<th class="noSortCss">电话/地址</th>
									<th class="noSortCss">定位</th>
									<!-- <th class="noSortCss">订单数量</th> -->
									<th class="noSortCss">图片</th>

								</tr>
							</thead>
							<tbody>
								<tr ng-repeat="x in csLineCustTaskList" class=""
									style="height: 40px">
									<td class="colorCenter">{{pager.rows * (pager.page - 1)+
										$index+1}}</td>
									<td>
										<div class="floatLeft" style="margin: 4px 5px 0 0;">
											<div class="list-tips-1">
												<span ng-if="x.clct_type==2">手选</span> <span
													ng-if="x.clct_type==1">扫卡</span>
											</div>
											<div class="list-tips-2">
												<span ng-if="x.clct_location_type==2">GPS</span> <span
													ng-if="x.clct_location_type==1">基站</span>
											</div>
										</div>
										<div class="floatLeft">
											{{x.clct_customerid_nameref}}<br>
											{{x.clct_customerid_category}}<br> 线路:{{x.bl_name}}
										</div>
									</td>
									<td>到店:{{x.clct_arrivetime}}<br>
										离店:{{x.clct_leavetime}}<br> 服务:{{x.service_time}}<br>
										在途:{{x.clct_traveltime}}

									</td>
									<td>电话:{{x.clct_customerid_mobile}}<br>
										地址:{{x.clct_customerid_address}}

									</td>
									<td>
										<span ng-if="x.clct_location_distance==0"> 距离:0米</span>
										<span ng-if="x.clct_location_distance!=0"> 距离:{{x.clct_location_distance_desc}}</span>
										 <br>
										地址:{{x.clct_address}}
									</td>
									<!-- <td>{{x.clct_ordernum}}</td> -->
									<td><img src="{{pic}}" 
										style="margin: 3px; height: 41px; width: 40px;"
										ng-repeat="pic in x.imageList track by $index" imageonload="imgLoadRefresh()"></td>

								</tr>

							</tbody>
						</table>
						<!-- 分页 -->
						<tm-pagination conf="pager" search-param="searchParam"></tm-pagination>
						<!--分页 -->
					</div>
				</div>
			</div>

			<div class="xt_tabUlBottom" ng-if="tab==2">
				<div class="tab-pane">
					<ul>
						<li ng-repeat="x in baseImgList"><label>
								<div class="floatLeft">
									<img src="{{x.imgPath}}"
										style="width: 200px; height: 232px;" imageonload="imgLoadFinish(baseImgList.length)"/>
								</div>
								<div class="floatLeft"
									style="width: 200px; height: 26px; line-height: 26px; overflow: hidden;">
									<span class="floatLeft" style="max-width: 150px;">{{x.cc_name}}</span>
									<a href="javascript:void(0);" ng-click="delImg(x.bar_id);"
										class="floatLeft"><div class="tab-pand-close-img"></div></a>
									<div class="floatRight" ng-show="false">
										<input type="checkbox" />
									</div>
								</div>
								<div class="floatLeft"
									style="width: 200px; height: 26px; line-height: 26px; overflow: hidden;">
									<span class="floatLeft" style="max-width: 120px;">{{x.clct_address}}</span>
									<span class="floatRight">{{x.add_time}}</span>
								</div>
						</label></li>

					</ul>
				</div>
			</div>
		</div>
	</div>
</div>
<style>
.tabColor {
	background-color: white;
	border-top: 1px solid #eee;
	border-left: 1px solid #eee;
	border-right: 1px solid #eee;
}
</style>

<!--加载-->
<div class="dialog" ng-show="dialogShow" style="z-index: 88">
	<div class="dialog-zdc"></div>
	<!-- 弹出添加子类 -->
	<div class="dg-xg-zh"
		style="z-index: 999999; width: 300px; height: 400px; margin: 0 auto;"
		ng-show="dialogShow">
		<div class="dg-xg-js" style="width: 300px;">
			查看图片
			<div class="dg-cancle" ng-click="cancleBtnClick(0)"></div>
		</div>
		<img style="width: 300px; height: 358px;" src="{{picPath}}">

	</div>
</div>
<style>
.tabColor {
	height:40px;
	background-color: white;
	border-top: 1px solid #ddd;
	border-top-right-radius: 4px;
	border-top-left-radius: 4px;
	border-left: 1px solid #ddd;
	border-right: 1px solid #ddd;
	border-bottom:1px solid #fff;
}

</style>
<script type="text/javascript">
	$("#ztree-btn").click(function() {
		$(".xt_changeHtml").toggleClass("enable");
		$(".xt_changeHtml").siblings().removeClass("enable");
	})
</script>
<script type="text/javascript">
	$(document).ready(function() {

		$(".nav-tabs li").click(function() {
			$(".nav-tabs li").removeClass("active");
			$(this).addClass("active");
			/* $(".t-box").hide(); 
			var activeTab = $(this).find("a").attr("href"); 
			$(activeTab).fadeIn();  */
			return false;
		});
		/* $('body').on('click', '.t-box-list>li', function() {

			$(".t-box-list>li").removeClass("item-select");
			$(this).addClass("item-select");
		}); */

	});
</script>