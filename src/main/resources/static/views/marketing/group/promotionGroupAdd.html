<div class="xt_changeHtml" style="margin-bottom: 120px;">
	<div class="addlistCenter">
		<div class="divVertical clearfix ray5" style="margin-top: 25px;">
			<span class="xt_bzWenZi width-just"><i class="colorRed">*</i> 促销主题：</span>
			<div class="widthAuto zk_controlInput">
				<input type="text" ng-model="vo.ppm_name" maxlength="15" style="width:300px" placeholder="促销主题在30个字符以内"/>
			</div>
		</div>
		<div class="divVertical clearfix ray5" style="margin-top: 25px;">
			<span class="xt_bzWenZi width-just"> 副标题：</span>
			<div class="widthAuto zk_controlInput">
				<input type="text" ng-model="vo.ppm_subtitle" maxlength="30" style="width:300px" placeholder="副标题在30个字符以内"/>
			</div>
		</div>
		<div class="divVertical clearfix ray5" style="margin-top: 25px;">
			<span class="xt_bzWenZi width-just"><i class="colorRed">*</i> 活动图片：</span>
			<div class="widthAuto zk_controlInput">
				<a ng-click="upImage($event,1,1)" style="color:#099fb8;" class="f14">上传图片</a>
										<div  style="margin-bottom:1.25rem;width:794px; height:300px; display:inline-block;" id="myeditor" 
										get-ue="ue_myeditor = getUe" ng-show="false" class="ueditor" ng-model="gb_content1"></div>
										<div style="margin-top:5px;">
											<div style="float:left;margin:5px;">
												<div class="gsGoodsImgs" style="width:100px; height:100px;border:1px solid #ddd;">
													<img alt="" src="{{vo.ppm_picture_show?vo.ppm_picture_show:'img/prizedef.jpg'}}"  style="width:100px; height:100px;">
												</div>
												
											</div>
											
											<div class="clearfix"></div>
			</div>
		</div>
		<div style="min-width:900px;margin-bottom: 20px;margin-top: 25px;box-sizing:border-box;padding:0 46px;">
			<table class="table table3" style="margin-bottom: 0 !important; border: 1px solid #dedede; border-bottom: 0;">
				<tbody>
					<tr class="zk_headerTrSty">
						<th style="width:10%;" ng-show="false">
							<div class="glyphicon glyphicon-cog" ng-show="false" style="width: 15px; height: 15px; cursor: pointer"></div>
						</th>
						<th style="width:50%;border-right: 1px solid #dedede;">活动商品 </th>
						<th style="width:10%;border-right: 1px solid #dedede;">商品编码 </th>
						<th style="width:10%;border-right: 1px solid #dedede;">价格 </th>
						<th style="width:10%;border-right: 1px solid #dedede;">数量 </th>
						
					</tr>
					<tr>
						<td colspan="14" style="padding: 0; border-bottom: 0;border-top:0;">
							<div style="padding-bottom: 2px;">
								<table class="table table3 table-bordered" style="border: 0; margin-bottom: 0 !important;">
									<tbody>
										<tr ng-repeat = "i in dataList track by $index" ng-init="index_i = $index">
											<td ng-show="false" style="width:10%; border-left: 0 !important;" class="colorCenter"><span ng-if="index_i+1<dataList.length">{{index_i+1}}</span><img src="../../../../img/sele_add.png" ng-if="index_i+1 == dataList.length" style="cursor: pointer;" ng-click="addLine(1);"/></td>
											<td style="width:50%;" class="SelectMulti-Container2 posRelative">
												<input type="text" class="inputBorderStyle2 SelectMulti-ShowDiv2" ng-model="i.pm_title" ng-change="i.ps_id='';keySearchFun(i.pm_title,'goods');"  ng-focus="goods_type=1;showDroplist($event,getGoods,1)" style="height: 33px; line-height: 33px;">
												<div class="droplistWrap2" style="width: 689px; left: 5px; top: 40px; overflow: hidden;">
													<div class="clearfix">
														<table >
															<tr class="listItem2" style="width:683px;">
																<td style="width:30px;line-height: 0px !important;"></td>
																<td style="width:430px;line-height: 0px !important;">商品</td>
																<td style="width:120px;line-height: 0px !important;">编号</td>
																<!-- <td style="width:260px;line-height: 0px !important;">库存</td> -->
															</tr>
														</table>
													</div>
													<div class="clearfix" style="height: 160px;overflow-y: auto;" >
														
														<table style="width:683px;">
															<tr class="listItem" ng-repeat="y in goodsList" ng-click = "chooseGoods(y,index_i,1);">
																<td style="width:30px;padding:4px !important;">
																	{{pager1.rows * (pager1.page - 1)+ $index+1}}
																</td>
																<td style="width:430px;padding:4px !important;" title="{{y.pm_title}}">
																	{{y.pm_title | cut:true:20:' ...'}}
																</td>
																
																<td style="width:120px;padding:4px !important;">
																	{{y.pm_code}}
																</td>
																<!-- <td style="width:260px;padding:4px !important;" max-length="6">
																	{{y.ggp_stock_desc}}
																</td> -->
															</tr>
														</table>
													</div>
												</div>
												<div class="droplistWrap2 zk_fanye" style="width:689px !important; top:226px !important; left:5px !important;height:25px;">
													<a ng-click="prevPage(pager1,getGoods)"  class="m30right m20left">上一页</a>
													<a ng-click="nextPage(pager1,getGoods)" class="m30right">下一页</a>
													<span class="m30right">{{pager1.page}}/{{pager1.pageTotal}}</span>
													<span>共{{pager1.total}}条</span>
													<a ng-show="false" class="common_add_all" ng-click="addAll(goodsList,index_i)">全部添加</a>
												</div>
											</td>
											

											
											<td style="width:10%;" ng-show="true" class="open colorCenter">{{i.pm_code}}</td>
											<td style="width:10%;border-right: 0;" class="open colorCenter" >
												<input type="number" min="0" class="inputBorderStyle2 SelectMulti-ShowDiv2" ng-model="i.ps_price" ng-blur="cal();" style="height: 33px; line-height: 33px;">
											</td>
											<td style="width:10%;" ng-show="true" class="open colorCenter">
												<input type="number" class="inputBorderStyle2 SelectMulti-ShowDiv2" ng-model="i.pm_num" min="1" max="9999999" step="0" ng-blur="cal();" style="height: 33px; line-height: 33px;">
											</td>
											
										</tr>
									</tbody>
								</table>
							</div>
						</td>
					</tr>
				</tbody>
			</table>
		</div>
		<div class="divVertical clearfix ray5" style="margin-top: 25px;">
			<span class="xt_bzWenZi width-just"><i class="colorRed">*</i> 促销时间：</span>
			<div class="widthAuto zk_controlInput">
				<input type="text" class="Wdate" style="width: 200px;" id="start_time" />
			</div>
		</div>
		<!-- 团购 start -->

		<div class="divVertical clearfix ray5" >
			<span class="xt_bzWenZi width-just"> <i class="colorRed">*</i>有效天数：</span>
			<div class="widthAuto zk_controlInput">
				<input type="number" maxlength="10" ng-model="vo.ppm_valid_day" style="width:50px;" />天 (开团成功后水票有效期)
			</div>
		</div>
		<div class="divVertical clearfix ray5" >
			<span class="xt_bzWenZi width-just"> <i class="colorRed">*</i>团购价格：</span>
			<div class="widthAuto zk_controlInput">
				<input type="number" maxlength="5" step="0.01" min="0" ng-model="vo.ppm_group_price" style="width:50px;" />元
			</div>
		</div>
		<div class="divVertical clearfix ray5">
			<span class="xt_bzWenZi width-just"><i class="colorRed">*</i>参与次数限制：</span>
			<div class="widthAuto zk_controlInput">
				<input type="number" maxlength="5" ng-model="vo.ppm_limit_num" style="width:50px;" />次
			</div>
		</div>
		<div class="divVertical clearfix ray5" >
			<span class="xt_bzWenZi width-just" ><i class="colorRed">*</i>开团人数：</span>
			<div class="widthAuto zk_controlInput">
				<input type="text" maxlength="5" ng-model="vo.ppm_group_peopler_num" style="width:50px;" />人
			</div>
		</div>
		<div class="divVertical clearfix ray5">
			<span class="xt_bzWenZi width-just">团购类型：</span>
			<div class="widthAuto zk_controlInput sale_inline">
				<div  ng-show="false">
					<label class="m10right" >
						<input type="radio" name="grouptype" ng-model="vo.ppm_group_type"  value="1" class="widthAuto ant-checkboxStyle" style="margin-top: -2px;"/> 新人团
					</label>
				</div>
				<div>
					<label class="m10right" >
						<input type="radio"  name="grouptype" value="2" ng-model="vo.ppm_group_type" class="widthAuto ant-checkboxStyle" style="margin-top: -2px;"/> 人气团
					</label>
				</div>
				<div>
					<label class="m10right" >
						<input type="radio"  name="grouptype" value="3" ng-model="vo.ppm_group_type" class="widthAuto ant-checkboxStyle" style="margin-top: -2px;"/> 全民参与
					</label>
				</div>
			</div>
		</div>
		<!-- 团购 end -->
		
		<!-- <div class="divVertical clearfix ray5">
			<span class="xt_bzWenZi width-just">会员客户级别：</span>
			<div class="widthAuto zk_controlInput sale_inline">
				<div>
					<label class="m10right">
						<input type="checkbox" checked   class="widthAuto ant-checkboxStyle js_selectAll" style="margin-top: -2px;"/> 全部级别
					</label>
				</div>				
				<div ng-repeat="x in gradeList">
					<label class="m10right">
						<input type="checkbox" checked name="grade" data-id="{{x.bg_id}}" value="{{x.bg_id}}" class="widthAuto ant-checkboxStyle js_grade js_select" style="margin-top: -2px;"/> {{x.bg_title}}
					</label>
				</div>
			</div>
		</div> -->
		
		
		<div class="divVertical clearfix ray5">
			<span class="xt_bzWenZi width-just">区域：</span>
			<div class="widthAuto zk_controlInput sale_inline">
				<div>
					<label class="m10right" >
						<input type="radio" ng-model="vo.ppm_range"  value="1" class="widthAuto ant-checkboxStyle" style="margin-top: -2px;"/> 全区域
					</label>
				</div>
				<div ng-show="false">
					<label class="m10right" >
						<input type="radio"  value="2" ng-model="vo.ppm_range" class="widthAuto ant-checkboxStyle" style="margin-top: -2px;"/> 以下区域
					</label>
				</div>
				
			</div>
		</div>
		<div class="divVertical clearfix ray5">
			<span class="xt_bzWenZi width-just">发布状态：</span>
			<div class="widthAuto zk_controlInput sale_inline">
				<div ng-show="false">
					<label class="m10right" >
						<input type="radio" name="state" ng-model="vo.ppm_state"  value="1" class="widthAuto ant-checkboxStyle" style="margin-top: -2px;"/> 取消
					</label>
				</div>
				<div>
					<label class="m10right" >
						<input type="radio"  name="state" value="2" ng-model="vo.ppm_state" class="widthAuto ant-checkboxStyle" style="margin-top: -2px;"/> 暂存
					</label>
				</div>
				<div>
					<label class="m10right" >
						<input type="radio"  name="state" value="3" ng-model="vo.ppm_state" class="widthAuto ant-checkboxStyle" style="margin-top: -2px;"/> 发布
					</label>
				</div>
				<div ng-show="false">
					<label class="m10right" >
						<input type="radio"  name="state" value="4" ng-model="vo.ppm_state" class="widthAuto ant-checkboxStyle" style="margin-top: -2px;"/> 停止
					</label>
				</div>
			</div>
		</div>
		<div class="divVertical clearfix ray5" ng-show="vo.pa_area_type==2">
			<span class="xt_bzWenZi width-just">区域选择</span>
			<div style="margin-left:116px">
			<div id="treeDemo" class="ztree">
								
			</div>
			</div>
			
		</div>
		<div class="divVertical clearfix ray5">
			<span class="xt_bzWenZi width-just"> 视频地址</span>
			<div class="widthAuto zk_controlInput">
				<input type="text" maxlength="255" ng-model="vo.ppm_def1" />
			</div>
		</div>
		<div class="divVertical clearfix ray5">
			<span class="xt_bzWenZi width-just"> 视频封面</span>
			<div class="widthAuto zk_controlInput">
				<input type="text" maxlength="255" ng-model="vo.ppm_def2" />
			</div>
		</div>
</div>
<div class="fixedBottom">
	<div  class="btnStyle Btncolor1 BtnHover1" ng-click="submit();">保存</div>
	
	<div class="btnStyle Btncolor2 BtnHover2" ><a ui-sref="index.marketing.promotionGroup" class="btnStyle Btncolor2 BtnHover2" >返回</a></div>
</div>

<!-- 遮挡层 -->
<div class="dialog" ng-show="ac_showHtml.show">
<div class="dialog-zdc" ></div>
<!-- 遮挡层 -->

<!-- 选择商品 -->
<div class="dg-xg-zh" style="width: 620px" ng-if="ac_showHtml.warn_html == 1">
	<div class="dg-xg-js" style="width: 620px">
		选择商品
		<div class="dg-cancle" ng-click="cancleBtnClick()"></div>
	</div>
	<div class="dg-content">
		<div class="xt_filter floatLeft" style=" width: 370px; margin-left:10px; margin-bottom: 10px;">	
			<input type="text" ng-model="searchParam.searchKey" placeholder="请输入关键词搜索" style="width:235px; height:20px; margin-right: 5px;">
			<div class="btnStyle Btncolor2 BtnHover2" ng-click="queryGoodsList();">搜索</div>
		</div>
		<div class="xt_filter mtop16" style="display: block;">
			<table  class="table table1 tableTh tdHover" style="max-height: 300px; overflow: auto;">
	            <thead>
	                <tr>
	                	<th style="width: 15px;"><input type="checkbox" name="check_all" ng-click="checkFun('check_all');"></th>
	                    <th class="colorCenter">商品编码</th>
	                    <th class="colorCenter">商品国际码</th>
	                    <th class="colorCenter" style="width: 275px">商品名称</th>
	                </tr>
	            </thead>
	            <tbody class="borBottom">
	                <tr ng-repeat="x in dataList" ng-click="checkFun(x.gp_id+'_'+$index,$event);">
	                	<td><input type="checkbox" name="id_{{x.gp_id}}_{{$index}}"></td>
	                    <td class="colorCenter">{{x.gb_goods_code}}</td>
	                    <td class="colorCenter">{{x.gb_international_code}}</td>
	                    <td class="colorCenter">{{x.gb_title}}</td>
	                </tr>
	               
	            </tbody>
	       </table>
        	<tm-pagination conf="pager"></tm-pagination>
		</div>
        
	</div>
	<div class="dg-bottom-color" >
		<div class="dg-submint">
			<div class="btnStyle Btncolor1 BtnHover1" ng-click="sureBtnClick();">确定</div>
		</div>
	</div>
</div>
<!-- 选择商品 -->

<script>

$(function(){
  $('.droplistWrap2').hide()
	$(document).on('click', function (ev) {
		if ($(ev.target).parents('.SelectMulti-Container2').length) {return}
		$('.droplistWrap2').hide()
	})
	
	
	//全选框不好使时
	$('body').on('click', '.js_selectAll', function(){
		var thisObj = $(this);
		if (thisObj.is(':checked')) {
			// $('.select').attr('checked', true); 
			$('.js_select').prop("checked", true);
			$('.js_selectAll').prop("checked", true);
			
		} else {
			$('.js_select').attr('checked', false);
			$('.js_selectAll').prop("checked", false);
		}
	});

	$('body').on('click', '.js_select', function(event){
		event.stopPropagation();
		var thisObj = $(this);
		if (thisObj.is(':checked')) {
			// $('.select').attr('checked', true); 
			// $('.select').prop("checked", true);  					 					
		} else {
			$('.js_selectAll').prop("checked", false);
		}
	});
});

function showDropList (obj){
	$('.droplistWrap2').hide();
	$(obj).parent().find('.droplistWrap2').toggle();
	console.log($(obj).parent().find('.droplistWrap2'))
};
</script>
